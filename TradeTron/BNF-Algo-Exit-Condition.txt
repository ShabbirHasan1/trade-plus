Exit condition for the NIFTY Rule Based ALGO With Expiry Day

( tt_Time ( 'NSE' ) >= tt_Number ( '1520' ) ) or ( tt_PNL ( 'strategy_id', 'run_counter' ) >= tt_Number ( '2000' ) * tt_Multiplier ( 'strategy_id' ) ) or ( tt_PNL ( 'strategy_id', 'run_counter' ) <= tt_Number ( '-1000' ) * tt_Multiplier ( 'strategy_id' ) ) or ( tt_get_element ( tt_RSI ( tt_get_data ( tt_get_instrument ( 'NSE_IDX,INDIA VIX,,,,,' ) , '3m', '100' ) , '15' ) , '-1' ) >= tt_Number ( '70' ) ) or ( ( tt_days_diff ( tt_Today ( 'NSE' ) , tt_curr_weekexpiry ( 'NIFTY BANK', '0' ) ) > tt_Number ( '1' ) ) and ( ( tt_get_element ( tt_CLOSE ( tt_get_data ( tt_get_instrument ( 'NFO,NIFTY BANK,,,,,' ) , '1m', '10' ) ) , '-1' ) >= ( tt_get_runtime ( 'strategy_id', 'NIFTY BANK', 'EntryUnderlyingPrice' ) + ( find_traded_instrument ( 'strategy_id', 'run_counter', 'Entry', 'price', 'NIFTY BANK', '1', '1', '1' ) + find_traded_instrument ( 'strategy_id', 'run_counter', 'Entry', 'price', 'NIFTY BANK', '1', '1', '2' ) ) / tt_Number ( '3' ) ) ) or ( tt_get_element ( tt_CLOSE ( tt_get_data ( tt_get_instrument ( 'NFO,NIFTY BANK,,,,,' ) , '1m', '10' ) ) , '-1' ) <= ( tt_get_runtime ( 'strategy_id', 'NIFTY BANK', 'EntryUnderlyingPrice' ) - ( find_traded_instrument ( 'strategy_id', 'run_counter', 'Entry', 'price', 'NIFTY BANK', '1', '1', '1' ) + find_traded_instrument ( 'strategy_id', 'run_counter', 'Entry', 'price', 'NIFTY BANK', '1', '1', '2' ) ) / tt_Number ( '3' ) ) ) ) ) or ( ( tt_days_diff ( tt_Today ( 'NSE' ) , tt_curr_weekexpiry ( 'NIFTY BANK', '0' ) ) == tt_Number ( '1' ) ) and ( ( tt_get_element ( tt_CLOSE ( tt_get_data ( tt_get_instrument ( 'NFO,NIFTY BANK,,,,,' ) , '1m', '10' ) ) , '-1' ) > ( tt_get_runtime ( 'strategy_id', 'NIFTY BANK', 'EntryUnderlyingPrice' ) + tt_math ( find_traded_instrument ( 'strategy_id', 'run_counter', 'Entry', 'price', 'NIFTY BANK', '1', '1', '1' ) , find_traded_instrument ( 'strategy_id', 'run_counter', 'Entry', 'price', 'NIFTY BANK', '1', '1', '2' ) , '+' ) / tt_Number ( '2' ) ) ) or ( tt_get_element ( tt_CLOSE ( tt_get_data ( tt_get_instrument ( 'NFO,NIFTY BANK,,,,,' ) , '1m', '10' ) ) , '-1' ) <= ( tt_get_runtime ( 'strategy_id', 'NIFTY BANK', 'EntryUnderlyingPrice' ) - tt_math ( find_traded_instrument ( 'strategy_id', 'run_counter', 'Entry', 'price', 'NIFTY BANK', '1', '1', '1' ) , find_traded_instrument ( 'strategy_id', 'run_counter', 'Entry', 'price', 'NIFTY BANK', '1', '1', '2' ) , '+' ) / tt_Number ( '2' ) ) ) ) ) or ( ( tt_Today ( 'NSE' ) == tt_curr_weekexpiry ( 'NIFTY BANK', '0' ) ) and ( ( tt_math ( tt_get_var ( find_traded_instrument ( 'strategy_id', 'run_counter', 'Entry', 'instrument', 'NIFTY BANK', '1', '1', '1' ) , 'LTP' ) , tt_get_var ( find_traded_instrument ( 'strategy_id', 'run_counter', 'Entry', 'instrument', 'NIFTY BANK', '1', '1', '2' ) , 'LTP' ) , '+' ) >= tt_math ( find_traded_instrument ( 'strategy_id', 'run_counter', 'Entry', 'price', 'NIFTY BANK', '1', '1', '1' ) , find_traded_instrument ( 'strategy_id', 'run_counter', 'Entry', 'price', 'NIFTY BANK', '1', '1', '2' ) , '+' ) * tt_Number ( '1.2' ) ) or ( ( tt_max_pnl ( 'strategy_id', 'run_counter' ) > tt_Number ( '500' ) * tt_Multiplier ( 'strategy_id' ) ) and ( tt_math ( tt_max_pnl ( 'strategy_id', 'run_counter' ) , tt_PNL ( 'strategy_id', 'run_counter' ) , '-' ) >= tt_Number ( '500' ) * tt_Multiplier ( 'strategy_id' ) ) ) ) ) 